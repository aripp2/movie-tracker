(this["webpackJsonpmovie-tracker"]=this["webpackJsonpmovie-tracker"]||[]).push([[0],{32:function(e,t,r){e.exports=r(51)},37:function(e,t,r){},43:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){},50:function(e,t,r){},51:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(21),o=r.n(s),c=(r(37),r(2)),i=r.n(c),u=r(6),l=r(15),p=r(16),v=r(18),m=r(17),f=r(19),h=r(13),d=r(4),b=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://api.themoviedb.org/3/movie/now_playing?","api_key=").concat("cee1e60becdb4297de68233fbef2f560","&language=en-US"),e.next=3,fetch(t);case 3:if((r=e.sent).ok){e.next=6;break}throw Error("There was an issue retrieving your movies. Please try again.");case 6:return e.next=8,r.json();case 8:return a=(a=e.sent).results.map((function(e){return{backdrop_path:e.backdrop_path,genre_ids:e.genre_ids,id:e.id,overview:e.overview,poster_path:e.poster_path,release_date:e.release_date,title:e.title,vote_average:e.vote_average,isFavorite:!1}})),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:3001/api/v1/login",r={method:"POST",body:JSON.stringify({email:t.email,password:t.password}),headers:{"Content-Type":"application/json"}},e.next=4,fetch("http://localhost:3001/api/v1/login",r);case 4:if((a=e.sent).ok||401===a.status){e.next=7;break}throw Error("Sorry, unable to retrieve your account. Try again later.");case 7:return e.next=9,a.json();case 9:if(n=e.sent,401!==a.status){e.next=12;break}throw new Error("Username or password incorrect");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:3001/api/v1/users",r={method:"POST",body:JSON.stringify({name:t.name,email:t.email,password:t.password}),headers:{"Content-Type":"application/json"}},e.next=4,fetch("http://localhost:3001/api/v1/users",r);case 4:if((a=e.sent).ok||500===a.status){e.next=7;break}throw Error("Sorry, unable to create your account. Try again later.");case 7:return e.next=9,a.json();case 9:if(n=e.sent,500!==a.status){e.next=12;break}throw new Error("There is already an account with this email. Go to login or use another email address.");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a,n,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://localhost:3001/api/v1/users/".concat(t,"/moviefavorites"),n={method:"POST",body:JSON.stringify({movie_id:r.id,title:r.title,poster_path:r.poster_path,release_date:r.release_date,vote_average:r.vote_average,overview:r.overview}),headers:{"Content-Type":"application/json"}},e.next=4,fetch(a,n);case 4:if((s=e.sent).ok){e.next=7;break}throw Error("Unable to add movie as favorite. Try again later.");case 7:return e.next=9,s.json();case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://localhost:3001/api/v1/users/".concat(t,"/moviefavorites"),e.next=3,fetch(r);case 3:if((a=e.sent).ok){e.next=6;break}throw Error("Unable to retrieve your favorite movies as this time. Please try again later");case 6:return e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://localhost:3001/api/v1/users/".concat(t,"/moviefavorites/").concat(r),n={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=4,fetch(a,n);case 4:if(e.sent.ok){e.next=7;break}throw Error("Unable to remove this movie as a favorite at this time. Please try again later");case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),j=function(e){return{type:"SET_USER",user:e}},k=function(e){return{type:"TOGGLE_FAV",id:e}},x=function(e){return{type:"SET_FAVS",favs:e}},F=(r(43),r(3)),_=Object(d.b)((function(e){return{user:e.user}}),(function(e){return{toggleFav:function(t){return e(k(t))}}}))((function(e){var t=e.id,r=e.title,a=e.date,s=e.poster,o=e.movie,c=e.isFavorite,i=e.toggleFav,u=e.user,l=e.refreshFavs,p=new Date(a+"T00:00").toString().split(" ").slice(1,4).join(" "),v=c?"Remove Favorite":"Add Favorite",m=c?"favorited":"";return n.a.createElement("article",{className:"movie-card",id:t},n.a.createElement("div",{className:"movie-details"},n.a.createElement("h2",null,r),n.a.createElement("h3",null,p),n.a.createElement("button",{className:"fav-btn ".concat(m),type:"button",disabled:!u,onClick:function(){i(t),l(o)}},v)),n.a.createElement(F.b,{to:"/movies/".concat(t)},n.a.createElement("img",{className:"poster",src:"http://image.tmdb.org/t/p/w1280".concat(s),alt:"Movie poster"})))})),S=(r(45),Object(d.b)((function(e){return{movies:e.movies,favorites:e.favorites}}))((function(e){var t=e.viewAll,r=e.movies,a=e.favorites,s=e.refreshFavs,o=(t?r:a).map((function(e){return n.a.createElement(_,{key:e.id,id:e.id,title:e.title,date:e.release_date,poster:e.poster_path,vote:e.vote_average,overview:e.overview,isFavorite:e.isFavorite,movie:e,refreshFavs:s})}));return n.a.createElement("section",{className:"movie-container"},o)}))),N=(r(46),Object(d.b)((function(e){return{user:e.user}}),(function(e){return{toggleFav:function(t){return e(k(t))}}}))((function(e){var t=e.movie,r=e.refreshFavs,a=e.user,s=e.toggleFav,o=t.backdrop_path,c=t.id,i=t.isFavorite,u=t.overview,l=t.poster_path,p=t.release_date,v=t.title,m=t.vote_average,f=new Date(p+"T00:00").toString().split(" ").slice(1,4).join(" "),h=i?"Remove Favorite":"Add Favorite";return n.a.createElement("section",{className:"cardDetails"},n.a.createElement("img",{className:"movie-backdrop",src:"http://image.tmdb.org/t/p/w1280".concat(o),alt:"movie backdrop"}),n.a.createElement("article",{className:"movie-details-wrapper"},n.a.createElement("img",{className:"movie-poster",src:"http://image.tmdb.org/t/p/w1280".concat(l),alt:"movie poster"}),n.a.createElement("div",{className:"movie-info-wrapper"},n.a.createElement("h1",{className:"movie-title"},v),n.a.createElement("h2",null,"Released: ",f),n.a.createElement("p",null,u),n.a.createElement("h2",null,"Vote Average: ",m),n.a.createElement("button",{className:"fav-btn-wrapper",type:"button",disabled:!a,onClick:function(){s(c),r(t)}},h),n.a.createElement(F.b,{to:"/"},n.a.createElement("button",{className:"back-btn",type:"button"},"\u25c0 back")))))}))),C=r(12),A=(r(47),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(v.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){e.setState(Object(C.a)({},t.target.name,t.target.value))},e.createAccount=function(){var t=Object(u.a)(i.a.mark((function t(r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({error:""}),t.prev=1,t.next=4,g(e.state);case 4:e.setState({success:!0}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),a=t.t0.message,e.setState({error:a});case 11:e.clearInputs();case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.clearInputs=function(){e.setState({name:"",email:"",password:""})},e.state={name:"",email:"",password:"",error:"",success:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.success?n.a.createElement(h.a,{to:"/login"}):n.a.createElement("section",{className:"form-section"},this.state.error&&n.a.createElement("h2",{className:"error-msg"},this.state.error),n.a.createElement("form",{className:"create-account-form"},n.a.createElement("h2",{className:"create-account-h2"},"Create Account: "),n.a.createElement("input",{type:"text",placeholder:"Enter Name",name:"name",value:this.state.name,onChange:this.handleChange}),n.a.createElement("input",{type:"text",placeholder:"Enter Email",name:"email",value:this.state.email,onChange:this.handleChange}),n.a.createElement("input",{type:"text",placeholder:"Enter Password",name:"password",value:this.state.password,onChange:this.handleChange}),n.a.createElement("button",{className:"login-btn",type:"button",disabled:!this.state.name||!this.state.email||!this.state.password,onClick:this.createAccount},"Create Account")))}}]),t}(a.Component)),T=(r(48),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(v.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){e.setState(Object(C.a)({},t.target.name,t.target.value))},e.submitUser=function(){var t=Object(u.a)(i.a.mark((function t(r){var a,n,s,o,c,u,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({error:""}),a=e.props,n=a.setUser,s=a.setFavs,o=a.updateFavs,t.prev=2,t.next=5,E(e.state);case 5:return c=t.sent,t.next=8,y(c.id);case 8:u=t.sent,s(u),o(u),n(c),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),l=t.t0.message,e.setState({error:l});case 18:e.clearInputs();case 19:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),e.clearInputs=function(){e.setState({email:"",password:""})},e.state={email:"",password:"",error:""},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.user?n.a.createElement(h.a,{to:"/"}):n.a.createElement("section",{className:"form-section"},n.a.createElement("form",null,this.state.error&&n.a.createElement("h2",{className:"error-msg"},this.state.error),n.a.createElement("input",{type:"text",placeholder:"Enter Email",name:"email",value:this.state.email,onChange:this.handleChange}),n.a.createElement("input",{type:"text",placeholder:"Enter Password",name:"password",value:this.state.password,onChange:this.handleChange}),n.a.createElement("button",{className:"login-btn",type:"button",disabled:!this.state.email||!this.state.password,onClick:this.submitUser},"Login"),n.a.createElement(F.b,{to:"/createaccount"},n.a.createElement("button",{className:"create-account-btn",type:"button"},"Create Account"))))}}]),t}(a.Component)),P=Object(d.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e(j(t))},setFavs:function(t){return e(x(t))},updateFavs:function(t){return e(function(e){return{type:"UPDATE_FAVS",favs:e}}(t))}}}))(T),D=(r(49),Object(d.b)((function(e){return{user:e.user,favorites:e.favorites}}),(function(e){return{setUser:function(t){return e(j(t))},clearFavs:function(){return e({type:"CLEAR_FAVS"})}}}))((function(e){var t=e.user,r=e.setUser,a=e.clearFavs;e.favorites;return n.a.createElement("header",null,n.a.createElement("h1",{className:"header-title"},"Movie Tracker"),n.a.createElement("div",{className:"header-btn-wrapper"},null!==t&&n.a.createElement("h2",null,"Welcome ",t.name),n.a.createElement(F.b,{to:"/favorites"},n.a.createElement("button",{className:"view-favs nav-btn",disabled:!t},"View Favorites")),n.a.createElement(F.b,{to:"/login"},n.a.createElement("button",{className:"login nav-btn",disabled:t},"Login")),n.a.createElement(F.b,{to:"/createaccount"},n.a.createElement("button",{className:"create nav-btn",disabled:t},"Create Account")),n.a.createElement(F.b,{to:"/",onClick:function(){r(null),a()}},n.a.createElement("button",{className:"signout nav-btn",disabled:!t},"Sign Out")),n.a.createElement(F.b,{to:"/"},n.a.createElement("button",{className:"home nav-btn"},"Back to All Movies"))))}))),R=(r(50),function(e){function t(){var e,r;Object(l.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(r=Object(v.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).refreshFavs=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,s,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.props,n=a.throwError,s=a.setFavs,o=a.user,e.prev=1,!t.isFavorite){e.next=7;break}return e.next=5,O(o.id,t.id);case 5:e.next=9;break;case 7:return e.next=9,w(o.id,t);case 9:return e.next=11,y(o.id);case 11:c=e.sent,s(c),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),u=e.t0.message,n(u);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,a,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.addMovies,a=t.throwError,e.prev=1,e.next=4,b();case 4:n=e.sent,r(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),s=e.t0.message,a(s);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,r=t.errorMsg;t.user;return n.a.createElement("div",{className:"App"},n.a.createElement(D,null),r&&n.a.createElement("h2",null,r),n.a.createElement(h.b,{exact:!0,path:"/",render:function(){return n.a.createElement(S,{viewAll:!0,refreshFavs:e.refreshFavs})}}),n.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return n.a.createElement(P,null)}}),n.a.createElement(h.b,{exact:!0,path:"/createaccount",render:function(){return n.a.createElement(A,null)}}),n.a.createElement(h.b,{exact:!0,path:"/favorites",render:function(){return n.a.createElement(S,{viewAll:!1,refreshFavs:e.refreshFavs})}}),n.a.createElement(h.b,{path:"/movies/:id",render:function(t){var r=t.match,a=e.props.movies.find((function(e){return e.id===parseInt(r.params.id)}));return n.a.createElement(N,{key:a.id,movie:a,refreshFavs:e.refreshFavs})}}))}}]),t}(a.Component)),U=Object(d.b)((function(e){return{errorMsg:e.errorMsg,user:e.user,movies:e.movies}}),(function(e){return{addMovies:function(t){return e(function(e){return{type:"ADD_MOVIES",movies:e}}(t))},throwError:function(t){return e(function(e){return{type:"THROW_ERROR",errorMsg:e}}(t))},setFavs:function(t){return e(x(t))}}}))(R),M=r(14),V=r(31);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach((function(t){Object(C.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(r,!0).forEach((function(t){Object(C.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=Object(M.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIES":return t.movies;case"TOGGLE_FAV":return e.map((function(e){return e.id===t.id?L({},e,{isFavorite:!e.isFavorite}):e}));case"UPDATE_FAVS":return e.map((function(e){return t.favs.favorites.forEach((function(t){t.movie_id===e.id&&(e.isFavorite=!0)})),e}));default:return e}},errorMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"THROW_ERROR":return t.errorMsg;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVS":return t.favs.favorites.map((function(e){return e.id=e.movie_id,J({},e,{isFavorite:!0})}));case"CLEAR_FAVS":return[];default:return e}}}),B=Object(M.createStore)(W,Object(V.composeWithDevTools)()),H=n.a.createElement(F.a,null,n.a.createElement(U,null));o.a.render(n.a.createElement(d.a,{store:B},H),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.405453da.chunk.js.map